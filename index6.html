<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Movies & Series I Loved — Darshan's Picks</title>
  <style>
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --muted: #9aa6b2;
      --accent: #ff6b6b;
      --glass: rgba(255,255,255,0.04);
      --poster-bg: #071018;
      --maxw: 1100px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      background: linear-gradient(180deg, #08101a 0%, #071219 100%);
      color: #e6eef6;
      display: flex;
      justify-content: center;
      padding: 36px 18px;
    }
    .wrap {
      width: 100%;
      max-width: var(--maxw);
    }
    header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .logo {
      width: 64px;
      height: 64px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), #ffb86b);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #061018;
      font-size: 20px;
    }
    h1 {
      margin: 0;
      font-size: 22px;
    }
    p.lead {
      margin: 2px 0 0;
      color: var(--muted);
      font-size: 13px;
    }
    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      margin: 18px 0;
      position: relative;
      flex-wrap: wrap;
    }
    .search {
      flex: 1 1 300px;
    }
    input[type=search] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.04);
      background: var(--card);
      color: inherit;
    }
    .filter-wrap {
      position: relative;
      min-width: 230px;
    }
    .filter-btn {
      padding: 10px 14px;
      border-radius: 10px;
      background: var(--glass);
      color: inherit;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 210px;
      user-select: none;
      white-space: nowrap;
    }
    .filter-btn:hover {
      background: rgba(255,255,255,0.08);
    }
    .filter-menu {
      position: absolute;
      top: 110%;
      right: 0;
      min-width: 230px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 10px;
      display: none;
      flex-direction: column;
      box-shadow: 0 4px 14px rgba(0,0,0,0.3);
      z-index: 10;
      max-height: 280px;
      overflow-y: auto;
      padding: 8px 0;
    }
    .filter-menu.open {
      display: flex;
    }
    .filter-item {
      padding: 8px 16px;
      font-size: 14px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    .filter-item:hover {
      background: rgba(255,255,255,0.06);
      color: #fff;
    }
    .filter-item input[type=checkbox] {
      cursor: pointer;
      transform: scale(1.1);
      margin: 0;
    }

    .taglist {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .tag {
      color: white;
      padding: 6px 10px;
      border-radius: 999px;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.04);
      cursor: pointer;
    }
    .tag.active {
      background: linear-gradient(90deg, var(--accent), #ffaa6b);
      color: #061018;
      border: none;
    }

    .ad {
      width: 100%;
      height: 90px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      margin: 18px 0;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 16px;
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.03);
    }
    .poster-wrapper {
      width: 100%;
      height: 300px;
      background: var(--poster-bg);
      border-radius: 8px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .poster {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .title {
      font-weight: 700;
      margin: 8px 0 4px;
    }
    .meta {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .small {
      font-size: 13px;
      color: var(--muted);
    }
    .btn-row {
      display: flex;
      gap: 8px;
    }
    .btn {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      transition: background 0.2s, color 0.18s;
      font-weight: 700;
    }
    .btn:hover {
      background: linear-gradient(90deg, var(--accent), #ffaa6b);
      color: #061018;
      border: none;
    }
    .btn-group {
      display: flex;
      gap: 8px;
      background: var(--glass);
      border: 1px solid rgba(255,255,255,0.11);
      border-radius: 10px;
      padding: 10px;
      margin-top: 8px;
      transition: box-shadow 0.2s, border-color 0.2s;
    }
    .btn-group:hover {
      border-color: var(--accent);
      box-shadow: 0 3px 18px rgba(255,107,107,0.09);
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(2,6,12,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .modal.open {
      display: flex;
    }
    .modal-card {
      width: 100%;
      max-width: 900px;
      background: #071019;
      border-radius: 12px;
      padding: 16px;
      border: 1px solid rgba(255,255,255,0.03);
    }
    .modal-grid {
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 12px;
    }
    .modal-poster {
      width: 100%;
      height: 380px;
      object-fit: cover;
      border-radius: 8px;
    }
    .close {
      background: transparent;
      border: none;
      color: var(--muted);
      cursor: pointer;
    }
    footer {
      margin-top: 20px;
      color: var(--muted);
      font-size: 13px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    @media (max-width: 720px) {
      .modal-grid {
        grid-template-columns: 1fr;
      }
      .modal-poster {
        height: 240px;
      }
    }
    .rating {
      display: inline-block;
      padding: 6px 8px;
      border-radius: 8px;
      background: rgba(255,255,255,0.03);
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">DB</div>
      <div>
        <h1>Darshan's Picks: Movies & Series</h1>
        <p class="lead">A curated list of movie & series I watched & loved — quick filters, details and ad slots ready for monetization.</p>
      </div>
    </header>

    <section class="controls">
      <div class="search">
        <input id="search" type="search" placeholder="Search movies or series..." />
      </div>
      <div class="filter-wrap">
        <button id="filterBtn" class="filter-btn">Filter Options ▼</button>
        <div id="filterMenu" class="filter-menu">
          <label class="filter-item"><input type="checkbox" data-filter="movies" checked> Movies</label>
          <label class="filter-item"><input type="checkbox" data-filter="series" checked> Series</label>
          <label class="filter-item"><input type="checkbox" data-filter="rating"> Rating Descending</label>
          <label class="filter-item"><input type="checkbox" data-filter="year"> Year Descending</label>
          <label class="filter-item"><input type="checkbox" data-filter="seen" checked> Seen</label>
          <label class="filter-item"><input type="checkbox" data-filter="unseen" checked> Unseen</label>
        </div>
      </div>
    </section>

    <div class="taglist" id="genres"></div>

    <div class="ad" id="ad-top">Ad Space — replace with your AdSense / ad network snippet</div>

    <main class="grid" id="grid"></main>

    <div class="ad" id="ad-bottom">Ad Space — great for inline ads or affiliate banners</div>

    <footer>
      <div>Made with ❤️ — Add your movies/series in the JS arrays at the top of the script.</div>
      <div class="small">Tip: Replace ad placeholders with your network code when ready.</div>
    </footer>
  </div>

  <div class="modal" id="modal">
    <div class="modal-card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong id="modal-title">Title</strong>
        <button class="close" id="modal-close">Close ✕</button>
      </div>
      <div class="modal-grid" style="margin-top:12px">
        <img id="modal-poster" class="modal-poster" src="" alt="poster" />
        <div>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
            <span id="modal-year" class="small"></span>
            <span id="modal-rating" class="rating"></span>
          </div>
          <p id="modal-desc" style="color:var(--muted)"></p>
          <p style="margin-top:10px"><strong>Why I liked it</strong></p>
          <p id="modal-notes" style="color:var(--muted)"></p>
          <div style="margin-top:14px" class="btn-group">
            <button id="open-trailer" class="btn">Open Trailer</button>
            <button id="toggle-fav" class="btn">Toggle Seen</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  const MOVIES = [
    { id: 'tdk', title: 'The Dark Knight Trilogy', year: 2008, rating: 9.1, genres: ['Action','Crime','Drama'],
      poster: 'https://images.unsplash.com/photo-1524985069026-dd778a71c7b4?auto=format&fit=crop&w=600&q=60',
      trailer: 'https://www.youtube.com/watch?v=EXeTwQWrcwY', notes: 'Grim, grounded take on Batman. Top-notch acting and Hans Zimmer score.' },
    { id: 'hp', title: 'Harry Potter Series', year: 2011, rating: 8.2, genres: ['Fantasy','Adventure'],
      poster: 'https://images.unsplash.com/photo-1542204165-1b0a0f9f5c6f?auto=format&fit=crop&w=600&q=60',
      trailer: 'https://www.youtube.com/watch?v=VyHV0BRtdxo', notes: 'A magical journey that grows with the characters. Great rewatch value.' },
    { id: 'lotr', title: 'The Lord of the Rings', year: 2003, rating: 9.0, genres: ['Fantasy','Adventure','Epic'],
      poster: 'https://images.unsplash.com/photo-1517602302552-471fe67acf66?auto=format&fit=crop&w=600&q=60',
      trailer: 'https://www.youtube.com/watch?v=V75dMMIW2B4', notes: 'Epic scope, unforgettable worldbuilding and emotional payoff.' }
  ];
  const SERIES = [
    { id: 'bb', title: 'Breaking Bad', year: 2013, rating: 9.5, genres: ['Crime','Drama','Thriller'],
      poster: 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=60',
      trailer: 'https://www.youtube.com/watch?v=HhesaQXLuRY', notes: 'Incredible acting, tight writing, and amazing twists.' },
    { id: 'got', title: 'Game of Thrones', year: 2019, rating: 8.4, genres: ['Fantasy','Adventure','Drama'],
      poster: 'https://images.unsplash.com/photo-1435527173128-983b87201b13?auto=format&fit=crop&w=600&q=60',
      trailer: 'https://www.youtube.com/watch?v=KPLWWIOCOOQ', notes: 'Epic scale, complex characters, but divisive ending.' },
    { id: 'str', title: 'Stranger Things', year: 2022, rating: 8.7, genres: ['Fantasy','Drama','Sci-Fi'],
      poster: 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=60',
      trailer: 'https://www.youtube.com/watch?v=b9EkMc79ZSU', notes: 'Fun adventure, great nostalgia & lovable cast.' }
  ];

  const state = {
    selectedGenre: null,
    query: '',
    categories: { movies: true, series: true },
    sortRatingDesc: false,
    sortYearDesc: false,
    filterSeen: true,
    filterUnseen: true
  };

  const SEEN_STORAGE_KEY = 'darshan_seen_combined';

  const filterBtn = document.getElementById('filterBtn');
  const filterMenu = document.getElementById('filterMenu');
  const filterItems = filterMenu.querySelectorAll('input[type=checkbox]');
  const genresEl = document.getElementById('genres');
  const grid = document.getElementById('grid');
  const search = document.getElementById('search');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modal-title');
  const modalPoster = document.getElementById('modal-poster');
  const modalDesc = document.getElementById('modal-desc');
  const modalNotes = document.getElementById('modal-notes');
  const modalYear = document.getElementById('modal-year');
  const modalRating = document.getElementById('modal-rating');
  const openTrailer = document.getElementById('open-trailer');
  const toggleFav = document.getElementById('toggle-fav');
  const modalClose = document.getElementById('modal-close');

  filterBtn.onclick = () => {
    filterMenu.classList.toggle('open');
  };

  document.addEventListener('click', e => {
    if (!e.target.closest('.filter-wrap')) {
      filterMenu.classList.remove('open');
    }
  });

  filterItems.forEach(input => {
    if (input.dataset.filter === 'movies' || input.dataset.filter === 'series') input.checked = true;
    if (input.dataset.filter === 'seen' || input.dataset.filter === 'unseen') input.checked = true;
    input.addEventListener('change', () => {
      const filter = input.dataset.filter;
      if (filter === 'movies' || filter === 'series') {
        state.categories[filter] = input.checked;
        state.selectedGenre = null;
        renderGenres();
      } else if (filter === 'rating') {
        state.sortRatingDesc = input.checked;
      } else if (filter === 'year') {
        state.sortYearDesc = input.checked;
      } else if (filter === 'seen') {
        state.filterSeen = input.checked;
      } else if (filter === 'unseen') {
        state.filterUnseen = input.checked;
      }
      render();
    });
  });

  function getCurrentList() {
    let out = [];
    if (state.categories.movies) out = out.concat(MOVIES);
    if (state.categories.series) out = out.concat(SERIES);
    return out;
  }

  function getSeenCombined() {
    return new Set(JSON.parse(localStorage.getItem(SEEN_STORAGE_KEY) || '[]'));
  }

  function saveSeen(seen) {
    localStorage.setItem(SEEN_STORAGE_KEY, JSON.stringify(Array.from(seen)));
  }

  function uniqueGenres() {
    const g = new Set();
    getCurrentList().forEach(m => {
      (m.genres || []).forEach(x => g.add(x));
    });
    return Array.from(g).sort();
  }

  function renderGenres() {
    const arr = uniqueGenres();
    genresEl.innerHTML = '';
    const all = document.createElement('button');
    all.className = 'tag' + (state.selectedGenre === null ? ' active' : '');
    all.textContent = 'All';
    all.onclick = () => { state.selectedGenre = null; render(); renderGenres(); };
    genresEl.appendChild(all);
    arr.forEach(g => {
      const b = document.createElement('button');
      b.className = 'tag' + (state.selectedGenre === g ? ' active' : '');
      b.textContent = g;
      b.onclick = () => { state.selectedGenre = (state.selectedGenre === g ? null : g); render(); renderGenres(); };
      genresEl.appendChild(b);
    });
  }

  function filterMovies() {
    const seen = getSeenCombined();
    let out = getCurrentList().slice();
    if (state.selectedGenre) {
      out = out.filter(m => m.genres.includes(state.selectedGenre));
    }
    if (state.query) {
      const q = state.query.toLowerCase();
      out = out.filter(m => m.title.toLowerCase().includes(q) || (m.notes || '').toLowerCase().includes(q));
    }
    if (!state.filterSeen || !state.filterUnseen) {
      out = out.filter(m => {
        const hasSeen = seen.has(m.id);
        if (!state.filterSeen && hasSeen) return false;
        if (!state.filterUnseen && !hasSeen) return false;
        return true;
      });
    }
    if (state.sortRatingDesc) {
      out.sort((a,b) => b.rating - a.rating);
    }
    if (state.sortYearDesc) {
      out.sort((a,b) => b.year - a.year);
    }
    return out;
  }

  function render() {
    const items = filterMovies();
    const seen = getSeenCombined();
    grid.innerHTML = '';
    if (items.length === 0) {
      grid.innerHTML = '<div style="grid-column:1/-1;color:var(--muted);padding:40px;border-radius:8px;background:rgba(255,255,255,0.01);text-align:center">No items found</div>';
      return;
    }
    items.forEach(m => {
      const c = document.createElement('div');
      c.className = 'card';
      c.innerHTML = `
        <div class="poster-wrapper">
          <img class="poster" src="${m.poster}" alt="${m.title} poster" />
        </div>
        <div class="title">${m.title}</div>
        <div class="meta">${m.genres.join(' • ')} <span style="float:right" class="small">${m.year}</span></div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="small">${(m.rating || '-') } ⭐</div>
          <div class="btn-group">
            <button class="btn" data-id="${m.id}" data-action="open">Details</button>
            <button class="btn" data-id="${m.id}" data-action="fav">${seen.has(m.id) ? 'Seen' : 'Mark Seen'}</button>
          </div>
        </div>`;
      grid.appendChild(c);

      const img = c.querySelector('.poster');
      img.onerror = () => {
        img.style.display = 'none'; // Hide broken img but keep wrapper background visible
      };
    });
  }

  grid.addEventListener('click', e => {
    const btn = e.target.closest('button');
    if (!btn) return;
    const id = btn.dataset.id;
    const action = btn.dataset.action;
    const movie = getCurrentList().find(x => x.id === id);
    if (!movie) return;
    const seen = getSeenCombined();
    if (action === 'open') openModal(movie, seen);
    if (action === 'fav') {
      if (seen.has(id)) seen.delete(id);
      else seen.add(id);
      saveSeen(seen);
      render();
    }
  });

  function openModal(m, seen) {
    modalTitle.textContent = m.title;
    modalPoster.src = m.poster;
    modalDesc.textContent = (m.genres || []).join(' • ');
    modalNotes.textContent = m.notes || '';
    modalYear.textContent = m.year || '';
    modalRating.textContent = typeof m.rating === 'number' ? m.rating : '-';
    openTrailer.onclick = () => {
      if (m.trailer) window.open(m.trailer, '_blank');
    };
    toggleFav.textContent = seen.has(m.id) ? 'Mark Unseen' : 'Mark Seen';
    toggleFav.onclick = () => {
      if (seen.has(m.id)) seen.delete(m.id);
      else seen.add(m.id);
      saveSeen(seen);
      render();
      modal.classList.remove('open');
    };
    modal.classList.add('open');
  }

  modalClose.addEventListener('click', () => modal.classList.remove('open'));
  modal.addEventListener('click', e => {
    if (e.target === modal) modal.classList.remove('open');
  });

  search.addEventListener('input', e => {
    state.query = e.target.value;
    render();
  });

  renderGenres();
  render();

</script>
</body>
</html>
